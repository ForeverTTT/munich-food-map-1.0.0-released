<!--pages/shop/shop.wxml-->
<view class="container">
  <image class="bg-image" src="{{bgImageUrl}}" mode="aspectFill"></image>
  <view class="banner-overlay"></view>
  
  <view class="back-button" bindtap="navigateBack">è¿”å›</view>

  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <view class="error-container" wx:elif="{{error}}">
    <text class="error-text">åŠ è½½å¤±è´¥ï¼Œè¯·è¿”å›é‡è¯•</text>
    <view class="back-button" bindtap="navigateBack">è¿”å›</view>
  </view>

  <view class="content-wrapper" wx:else>
    <image class="shop-image" src="{{shopData.imageUrl || '/images/logo.png'}}" mode="aspectFill" lazy-load="true" binderror="onImageError"></image>
    
    <view class="shop-info-card">
      <view class="shop-header">
        <view class="shop-title-row">
          <view class="title-container">
            <text class="shop-name">{{shopData.name}}</text>
            <text class="cuisine-badge">{{shopData.cuisine}}</text>
          </view>
          <view class="favorite-button" bindtap="toggleFavorite">
            <text class="favorite-icon {{isFavorite ? 'active' : ''}}">â˜…</text>
          </view>
        </view>
        
        <view class="shop-rating">
          <text class="rating-score">{{shopData.rating}}</text>
          <view class="rating-stars">
            <text class="star" wx:for="{{5}}" wx:key="*this">â˜…</text>
          </view>
        </view>
        
        <view class="tag-list">
          <text class="tag-item" wx:for="{{shopData.tags}}" wx:key="*this">{{item}}</text>
        </view>
      </view>
      
      <!-- é¤å…è¯¦ç»†ä¿¡æ¯ -->
      <view class="info-section">
        <view class="info-row" bindtap="openGoogleMaps">
          <view class="info-icon">ğŸ“</view>
          <view class="info-content">
            <view class="address-container">
              <text class="info-text">{{shopData.address}}</text>
              <view class="copy-address" catchtap="copyAddress" data-address="{{shopData.address}}">å¤åˆ¶</view>
            </view>
            <view class="map-link">
              <text class="map-icon">ğŸ—ºï¸</text>
              <text class="map-hint">ç‚¹å‡»æŸ¥çœ‹è°·æ­Œåœ°å›¾</text>
            </view>
          </view>
        </view>
        
        <view class="info-row" bindtap="callShop">
          <view class="info-icon">ğŸ“</view>
          <text class="info-text">{{shopData.phone}}</text>
        </view>
        
        <view class="info-row">
          <view class="info-icon">ğŸ’°</view>
          <text class="info-text">äººå‡: {{shopData.price}}â‚¬</text>
        </view>
        
        <view class="info-row">
          <view class="info-icon">ğŸ•’</view>
          <text class="info-text">{{shopData.hours}}</text>
        </view>
      </view>
    </view>
    
    <!-- é¤å…ä»‹ç» -->
    <view class="description-card">
      <view class="card-title">é¤å…ä»‹ç»</view>
      <text class="description-text">{{shopData.description}}</text>
    </view>
    
    <!-- äº¤é€šæŒ‡å— -->
    <view class="transport-card">
      <view class="card-title">äº¤é€šæŒ‡å—</view>
      <view class="transport-options">
        <view class="transport-option">
          <view class="transport-icon">ğŸš‡</view>
          <text class="transport-text">åœ°é“: {{shopData.transport.subway}}</text>
        </view>
        <view class="transport-option">
          <view class="transport-icon">ğŸšŒ</view>
          <text class="transport-text">å…¬äº¤: {{shopData.transport.bus}}</text>
        </view>
      </view>
    </view>
  </view>

</view>